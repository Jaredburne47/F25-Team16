{% extends "base.html" %}
{% block title %}Report · Detail{% endblock %}

{% block content %}
<style>
  .report-card { border-radius: 12px; box-shadow: 0 8px 24px rgba(0,0,0,.06); }
  .section-h { font-size: .95rem; color: #6c757d; letter-spacing:.3px; }
  .number { font-variant-numeric: tabular-nums; }
  .subtle { color:#6c757d; }
  tfoot th { background: #f8f9fa; }
</style>

<div class="container mt-4">
  <div class="d-flex align-items-center justify-content-between mb-1">
    <h2 class="mb-0">Purchase Detail</h2>
    <div class="d-flex gap-2">
      <a class="btn btn-outline-secondary btn-sm" href="{{ url_for('reports_dashboard') }}">← Back</a>
      <button class="btn btn-primary btn-sm" onclick="window.print()">Print</button>
    </div>
  </div>
  {% if driver %}
    <div class="section-h mb-3">Driver: <strong>{{ driver }}</strong></div>
  {% endif %}

  <div class="card report-card p-3 p-md-4">
    {% if data and data|length > 0 %}
      <div class="table-responsive">
        <table class="table table-striped table-bordered align-middle">
          <thead class="table-light">
            <tr>
              <th style="min-width:110px;">Date</th>
              <th>Order #</th>
              <th>Product</th>
              <th class="text-end">Qty</th>
              <th class="text-end">Points Each</th>
              <th class="text-end">Total Points</th>
            </tr>
          </thead>
          <tbody>
            {% for row in data %}
            <tr>
              <td class="subtle">{{ row['OrderDate'] }}</td>
              <td>{{ row['OrderID'] }}</td>
              <td>{{ row['Product'] }}</td>
              <td class="text-end number">{{ row['Quantity'] }}</td>
              <td class="text-end number">{{ row['PointsEach'] }}</td>
              <td class="text-end number fw-semibold text-success">{{ row['TotalPoints'] }}</td>
            </tr>
            {% endfor %}
          </tbody>
          <tfoot>
            <tr>
              <th colspan="5" class="text-end">TOTAL</th>
              <th class="text-end number fw-bold text-primary">{{ total_points }}</th>
            </tr>
          </tfoot>
        </table>
      </div>
    {% else %}
      <p class="text-muted mb-0">No purchases found for this selection.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
