{% extends "base.html" %}
{% block title %}Report · Summary{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/report.css') }}">

<div class="report-container">

  <div class="report-header">
    <div class="report-title">{{ title or 'Summary Report' }}</div>

    {% if request.args.get('start_date') or request.args.get('end_date') %}
      <div class="report-daterange">
        Date Range:
        {% if request.args.get('start_date') %}
          {{ request.args.get('start_date') }}
        {% else %}
          Beginning
        {% endif %}
        &nbsp;–&nbsp;
        {% if request.args.get('end_date') %}
          {{ request.args.get('end_date') }}
        {% else %}
          Today
        {% endif %}
      </div>
    {% endif %}
  </div>

  <!-- Buttons -->
  <div class="report-actions no-print">
    <a class="btn btn-outline-secondary btn-sm" href="{{ url_for('reports_dashboard') }}">← Back</a>
    <button class="btn btn-primary btn-sm" onclick="window.print()">Print</button>
  </div>

  {% if data and data|length > 0 %}

    <table class="summary-table">
      <thead>
        <tr>
          {% for col in columns %}
            <th class="{% if 'total' in col|lower or 'points' in col|lower %}summary-number{% endif %}">
              {{ col }}
            </th>
          {% endfor %}
        </tr>
      </thead>

      <tbody>
        {% for row in data %}
        <tr>
          {% for col in columns %}
            <td class="{% if 'total' in col|lower or 'points' in col|lower %}summary-number{% endif %}">
              {{ row[col] }}
            </td>
          {% endfor %}
        </tr>
        {% endfor %}
      </tbody>
    </table>

  {% else %}
    <p>No data available.</p>
  {% endif %}
</div>

{% endblock %}
